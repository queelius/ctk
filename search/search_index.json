{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Conversation Toolkit (CTK)","text":"<p>A powerful, plugin-based system for managing AI conversations from multiple providers. Import, store, search, and export your conversations in a unified tree format while preserving provider-specific details.</p>"},{"location":"#quick-start","title":"\ud83d\ude80 Quick Start","text":"<pre><code># Setup (one-time)\nmake install\nsource venv/bin/activate\n\n# Import conversations\nctk import chatgpt_export.json --db my_chats.db\nctk import claude_export.json --db my_chats.db --format anthropic\n\n# View and search with beautiful tables\nctk list --db my_chats.db --starred\nctk search \"python async\" --db my_chats.db --limit 10\nctk ask \"show me conversations about machine learning\" --db my_chats.db\n\n# Interactive chat with LLM\nctk chat --db my_chats.db  # Start TUI with conversation management\n\n# Export for fine-tuning\nctk export training.jsonl --db my_chats.db --format jsonl\n</code></pre>"},{"location":"#key-features","title":"\ud83c\udf1f Key Features","text":""},{"location":"#core-functionality","title":"Core Functionality","text":"<ul> <li>\ud83c\udf33 Universal Tree Format: All conversations stored as trees - linear chats are single-path trees, branching conversations preserve all paths</li> <li>\ud83d\udd0c Plugin Architecture: Auto-discovers importers/exporters, easy to add new formats</li> <li>\ud83d\udcbe SQLite Backend: Fast, searchable local database with proper indexing</li> <li>\ud83d\udd12 Privacy First: Everything local, optional secret masking for API keys/passwords</li> <li>\ud83e\udd16 Coding Agent Support: Import from GitHub Copilot, Cursor, and other coding assistants</li> </ul>"},{"location":"#search-discovery","title":"Search &amp; Discovery","text":"<ul> <li>\ud83d\udd0d Full-Text Search: Search across all conversations instantly with Rich table output</li> <li>\ud83e\udd16 Natural Language Queries: Use <code>/ask</code> or <code>ctk ask</code> for LLM-powered queries</li> <li>\ud83c\udff7\ufe0f Smart Tagging: Auto-tags by provider, model, language; manual tags; LLM auto-tagging</li> <li>\u2b50 Organization: Star, pin, and archive conversations for easy filtering</li> </ul>"},{"location":"#interactive-features","title":"Interactive Features","text":"<ul> <li>\ud83d\udcac Chat TUI: Beautiful terminal UI with conversation browsing, editing, and chat</li> <li>\ud83c\udf10 MCP Integration: Model Context Protocol support for tool calling</li> <li>\ud83d\udd04 Live Editing: Fork conversations, navigate paths, edit trees in real-time</li> <li>\ud83d\udcca Rich Visualization: Color-coded messages, tree views, path exploration</li> </ul>"},{"location":"#installation","title":"\ud83d\udce6 Installation","text":""},{"location":"#from-source","title":"From Source","text":"<pre><code>git clone https://github.com/yourusername/ctk.git\ncd ctk\nmake setup\nsource .venv/bin/activate\n</code></pre>"},{"location":"#manual-setup","title":"Manual Setup","text":"<pre><code>python3 -m venv .venv\nsource .venv/bin/activate\npip install -e .\n</code></pre>"},{"location":"#import-examples","title":"\ud83d\udce5 Import Examples","text":""},{"location":"#chatgptopenai","title":"ChatGPT/OpenAI","text":"<p>Export your ChatGPT conversations from chat.openai.com/settings \u2192 Data Controls \u2192 Export</p> <pre><code># Auto-detect format\nctk import conversations.json --db chats.db\n\n# Explicit format with tags\nctk import chatgpt_export.json --db chats.db --format openai --tags \"work,2024\"\n</code></pre>"},{"location":"#claudeanthropic","title":"Claude/Anthropic","text":"<p>Export from Claude's settings</p> <pre><code>ctk import claude_export.json --db chats.db --format anthropic\n</code></pre>"},{"location":"#github-copilot-from-vs-code","title":"GitHub Copilot (from VS Code)","text":"<pre><code># Import from VS Code workspace storage\nctk import ~/.vscode/workspaceStorage --db chats.db --format copilot\n\n# Or find Copilot data automatically\npython -c \"from ctk.integrations.importers.copilot import CopilotImporter; \\\n          paths = CopilotImporter.find_copilot_data(); \\\n          print('\\n'.join(map(str, paths)))\"\n</code></pre>"},{"location":"#local-llm-formats-jsonl","title":"Local LLM Formats (JSONL)","text":"<pre><code># Import JSONL for fine-tuning datasets\nctk import training_data.jsonl --db chats.db --format jsonl\n\n# Import multiple files\nfor file in *.jsonl; do\n    ctk import \"$file\" --db chats.db --format jsonl\ndone\n</code></pre>"},{"location":"#search-and-filter","title":"\ud83d\udd0d Search and Filter","text":""},{"location":"#list-conversations","title":"List Conversations","text":"<pre><code># List all (newest first) with Rich tables\nctk list --db chats.db\n\n# Filter by status\nctk list --db chats.db --starred\nctk list --db chats.db --pinned\nctk list --db chats.db --archived\n\n# Combine filters\nctk list --db chats.db --starred --pinned --limit 10\n\n# Output as JSON\nctk list --db chats.db --json\n</code></pre>"},{"location":"#search","title":"Search","text":"<pre><code># Search with Rich table output\nctk search \"machine learning\" --db chats.db\n\n# Advanced filtering\nctk search \"python\" --db chats.db --source ChatGPT --model GPT-4\nctk search \"async\" --db chats.db --tags \"code,tutorial\" --limit 20\n\n# Search with date ranges\nctk search \"AI\" --db chats.db --date-from 2024-01-01 --date-to 2024-12-31\n</code></pre>"},{"location":"#natural-language-queries","title":"Natural Language Queries","text":"<pre><code># Ask anything in plain English using LLM\nctk ask \"show me starred conversations\" --db chats.db\nctk ask \"find discussions about async python\" --db chats.db\nctk ask \"conversations from last week about AI\" --db chats.db --debug\n\n# The LLM interprets your query and executes the right database operations\n</code></pre>"},{"location":"#view-conversations","title":"View Conversations","text":"<pre><code># Show specific conversation (prefix matching)\nctk show abc123 --db chats.db\n\n# Show with path selection\nctk show abc123 --db chats.db --path longest\nctk show abc123 --db chats.db --path latest\n\n# View tree structure\nctk tree abc123 --db chats.db\n\n# List all paths in branching conversation\nctk paths abc123 --db chats.db\n</code></pre>"},{"location":"#view-statistics","title":"View Statistics","text":"<pre><code>ctk stats --db chats.db\n\n# Output:\n# Database Statistics:\n#   Total conversations: 851\n#   Total messages: 25890\n#   Starred: 23\n#   Pinned: 5\n#   Archived: 142\n# Messages by role:\n#     assistant: 12388\n#     user: 9574\n#     system: 1632\n# Conversations by source:\n#     ChatGPT: 423\n#     Claude: 287\n#     Copilot: 141\n</code></pre>"},{"location":"#conversation-organization","title":"\ud83d\udccb Conversation Organization","text":""},{"location":"#starunstar-conversations","title":"Star/Unstar Conversations","text":"<pre><code># Star a conversation for quick access\nctk star abc123 --db chats.db\n\n# Star multiple conversations\nctk star abc123 def456 ghi789 --db chats.db\n\n# Unstar\nctk star --unstar abc123 --db chats.db\n</code></pre>"},{"location":"#pinunpin-conversations","title":"Pin/Unpin Conversations","text":"<pre><code># Pin important conversations to the top\nctk pin abc123 --db chats.db\n\n# Unpin\nctk pin --unpin abc123 --db chats.db\n</code></pre>"},{"location":"#archiveunarchive","title":"Archive/Unarchive","text":"<pre><code># Archive old conversations\nctk archive abc123 --db chats.db\n\n# Unarchive\nctk archive --unarchive abc123 --db chats.db\n</code></pre>"},{"location":"#rename-conversations","title":"Rename Conversations","text":"<pre><code># Change conversation title\nctk title abc123 \"New descriptive title\" --db chats.db\n</code></pre>"},{"location":"#interactive-chat-tui","title":"\ud83d\udcac Interactive Chat TUI","text":"<p>Launch the terminal UI for interactive conversation management and chat:</p> <pre><code>ctk chat --db chats.db\n</code></pre>"},{"location":"#tui-features","title":"TUI Features","text":"<p>Navigation &amp; Browsing: - Browse conversations with filtering (starred, pinned, archived) - Rich table view with emoji flags (\u2b50\ud83d\udccc\ud83d\udce6) - Quick search and natural language queries - Tree view for branching conversations - Path navigation in multi-branch trees</p> <p>Conversation Management: - Create, rename, delete conversations - Star, pin, archive operations - Auto-tagging with LLM - Export to various formats</p> <p>Live Chat: - Chat with any LLM provider (Ollama, OpenAI, Anthropic) - Model Context Protocol (MCP) tool support - Fork conversations to explore alternatives - Edit and regenerate messages - Switch between conversation paths</p>"},{"location":"#tui-commands","title":"TUI Commands","text":"<pre><code># Navigation\n/browse              # Browse conversations table\n/show &lt;id&gt;           # Show conversation\n/tree &lt;id&gt;           # View tree structure\n/paths &lt;id&gt;          # List all paths\n\n# Search &amp; Query\n/search &lt;query&gt;      # Full-text search\n/ask &lt;query&gt;         # Natural language query (LLM-powered)\n\n# Organization\n/star &lt;id&gt;           # Star conversation\n/pin &lt;id&gt;            # Pin conversation\n/archive &lt;id&gt;        # Archive conversation\n/title &lt;id&gt; &lt;title&gt;  # Rename conversation\n\n# Chat Operations\n/fork                # Fork current conversation\n/regenerate          # Regenerate last message\n/edit &lt;msg_id&gt;       # Edit a message\n/model &lt;name&gt;        # Switch LLM model\n\n# Export &amp; Tools\n/export &lt;format&gt;     # Export current conversation\n/tag                 # Auto-tag with LLM\n/help                # Show all commands\n/quit                # Exit TUI\n</code></pre>"},{"location":"#database-operations","title":"\ud83d\uddc4\ufe0f Database Operations","text":""},{"location":"#merge-databases","title":"Merge Databases","text":"<pre><code># Combine multiple databases\nctk merge source1.db source2.db --output merged.db\n\n# Automatically handles duplicates by conversation ID\n</code></pre>"},{"location":"#database-diff","title":"Database Diff","text":"<pre><code># Compare two databases\nctk diff db1.db db2.db\n\n# Shows:\n# - Conversations only in db1\n# - Conversations only in db2\n# - Conversations with different content\n</code></pre>"},{"location":"#filter-and-extract","title":"Filter and Extract","text":"<pre><code># Create filtered database\nctk filter --db all_chats.db --output work_chats.db --tags \"work\"\nctk filter --db all_chats.db --output starred.db --starred\nctk filter --db all_chats.db --output recent.db --date-from 2024-01-01\n</code></pre>"},{"location":"#export-examples","title":"\ud83d\udce4 Export Examples","text":""},{"location":"#export-for-fine-tuning","title":"Export for Fine-Tuning","text":"<pre><code># JSONL format for local LLMs\nctk export training.jsonl --db chats.db --format jsonl\n\n# Include only assistant responses\nctk export responses.jsonl --db chats.db --format jsonl --path-selection longest\n\n# Export with metadata\nctk export full_export.jsonl --db chats.db --format jsonl --include-metadata\n</code></pre>"},{"location":"#export-with-filtering","title":"Export with Filtering","text":"<pre><code># Export specific conversations\nctk export selected.jsonl --db chats.db --ids conv1 conv2 conv3\n\n# Filter by source\nctk export openai_only.json --db chats.db --filter-source \"ChatGPT\"\n\n# Filter by model\nctk export gpt4_convs.json --db chats.db --filter-model \"GPT-4\"\n\n# Filter by tags\nctk export work_chats.json --db chats.db --filter-tags \"work,important\"\n</code></pre>"},{"location":"#export-with-sanitization","title":"Export with Sanitization","text":"<pre><code># Remove secrets before sharing\nctk export clean_export.jsonl --db chats.db --format jsonl --sanitize\n\n# This removes:\n# - API keys (OpenAI, Anthropic, AWS, etc.)\n# - Passwords and tokens\n# - SSH keys\n# - Database URLs\n# - Credit card numbers (if any)\n</code></pre>"},{"location":"#export-to-hugo-static-site","title":"Export to Hugo (Static Site)","text":"<pre><code># Export all conversations as Hugo page bundles\nctk export content/conversations/ --format hugo --db chats.db\n\n# Export only starred conversations (curated for blog)\nctk export content/conversations/ --format hugo --db chats.db --starred\n\n# Export specific conversations\nctk export content/conversations/ --format hugo --db chats.db --ids conv1 conv2\n\n# Mark as drafts for review\nctk export content/conversations/ --format hugo --db chats.db --draft\n</code></pre> <p>Each conversation becomes a Hugo page bundle: <pre><code>content/conversations/\n  2024-01-15-debugging-rust-abc123/\n    index.md        # Frontmatter + markdown content\n    images/         # Copied media files\n</code></pre></p>"},{"location":"#export-to-html5-interactive-app","title":"Export to HTML5 (Interactive App)","text":"<pre><code># Single self-contained HTML file (default, recommended)\nctk export archive.html --format html --db chats.db\n\n# Separate media files for smaller HTML\nctk export archive.html --format html --db chats.db --media-dir media\n# Creates: archive.html + media/ folder\n\n# Multi-file export (requires web server)\nctk export archive/ --format html --db chats.db --no-embed\n</code></pre>"},{"location":"#understanding-the-tree-structure","title":"\ud83c\udf33 Understanding the Tree Structure","text":"<p>CTK stores all conversations as trees, which provides several benefits:</p>"},{"location":"#linear-conversations-single-path-trees","title":"Linear Conversations \u2192 Single-Path Trees","text":"<pre><code>User: \"What is Python?\"\n  \u2514\u2500\u2500 Assistant: \"Python is a programming language...\"\n      \u2514\u2500\u2500 User: \"How do I install it?\"\n          \u2514\u2500\u2500 Assistant: \"You can install Python by...\"\n</code></pre>"},{"location":"#branching-conversations-eg-chatgpt-regenerations","title":"Branching Conversations (e.g., ChatGPT regenerations)","text":"<pre><code>User: \"Write a poem\"\n  \u251c\u2500\u2500 Assistant (v1): \"Roses are red...\"\n  \u2514\u2500\u2500 Assistant (v2): \"In fields of gold...\"  [regenerated]\n      \u2514\u2500\u2500 User: \"Make it longer\"\n          \u2514\u2500\u2500 Assistant: \"In fields of gold, where sunshine...\"\n</code></pre>"},{"location":"#path-selection-for-export","title":"Path Selection for Export","text":"<pre><code># Export longest path (default)\nctk export out.jsonl --db chats.db --path-selection longest\n\n# Export first path (original)\nctk export out.jsonl --db chats.db --path-selection first\n\n# Export most recent path\nctk export out.jsonl --db chats.db --path-selection last\n</code></pre>"},{"location":"#advanced-usage","title":"\ud83d\udd27 Advanced Usage","text":""},{"location":"#python-api","title":"Python API","text":"<pre><code>from ctk import ConversationDB, registry\n\n# Load conversations\nwith ConversationDB(\"chats.db\") as db:\n    # Search\n    results = db.search_conversations(\"python async\")\n\n    # Load specific conversation\n    conv = db.load_conversation(\"conv_id_123\")\n\n    # Get all paths in a branching conversation\n    paths = conv.get_all_paths()\n\n    # Get longest path\n    longest = conv.get_longest_path()\n\n    # Add new message to existing conversation\n    from ctk import Message, MessageContent, MessageRole\n\n    msg = Message(\n        role=MessageRole.USER,\n        content=MessageContent(text=\"New question\")\n    )\n    conv.add_message(msg, parent_id=\"previous_msg_id\")\n    db.save_conversation(conv)\n</code></pre>"},{"location":"#batch-operations","title":"Batch Operations","text":"<pre><code>import glob\nfrom ctk import ConversationDB, registry\n\n# Import all exports from a directory\nwith ConversationDB(\"all_chats.db\") as db:\n    for file in glob.glob(\"exports/*.json\"):\n        format = \"openai\" if \"chatgpt\" in file.lower() else None\n        convs = registry.import_file(file, format=format)\n\n        for conv in convs:\n            # Add file source as tag\n            conv.metadata.tags.append(f\"file:{file}\")\n            db.save_conversation(conv)\n\n    # Get statistics\n    stats = db.get_statistics()\n    print(f\"Imported {stats['total_conversations']} conversations\")\n</code></pre>"},{"location":"#custom-sanitization-rules","title":"Custom Sanitization Rules","text":"<pre><code>from ctk.core.sanitizer import Sanitizer, SanitizationRule\nimport re\n\n# Create custom sanitizer\nsanitizer = Sanitizer(enabled=True)\n\n# Add company-specific patterns\nsanitizer.add_rule(SanitizationRule(\n    name=\"internal_urls\",\n    pattern=re.compile(r'https://internal\\.company\\.com/[^\\s]+'),\n    replacement=\"[INTERNAL_URL]\"\n))\n\nsanitizer.add_rule(SanitizationRule(\n    name=\"employee_ids\",\n    pattern=re.compile(r'EMP\\d{6}'),\n    replacement=\"[EMPLOYEE_ID]\"\n))\n</code></pre>"},{"location":"#available-plugins","title":"\ud83d\udd0c Available Plugins","text":""},{"location":"#importers","title":"Importers","text":"<ul> <li>openai - ChatGPT exports (preserves full tree structure)</li> <li>anthropic - Claude exports</li> <li>gemini - Google Gemini/Bard</li> <li>copilot - GitHub Copilot from VS Code</li> <li>jsonl - Generic JSONL format for local LLMs</li> <li>filesystem_coding - Auto-detect coding agent data</li> <li>coding_agent - Generic coding assistant format</li> </ul>"},{"location":"#exporters","title":"Exporters","text":"<ul> <li>jsonl - JSONL for fine-tuning (multiple formats)</li> <li>json - Native CTK format, OpenAI, Anthropic, or generic JSON</li> <li>markdown - Human-readable with tree visualization</li> <li>html - Interactive HTML5 app with browsing, search, and media gallery</li> <li>hugo - Hugo page bundles for static site generation</li> </ul>"},{"location":"#list-available-plugins","title":"List Available Plugins","text":"<pre><code>ctk plugins\n</code></pre>"},{"location":"#creating-custom-plugins","title":"\ud83d\udee0\ufe0f Creating Custom Plugins","text":""},{"location":"#custom-importer","title":"Custom Importer","text":"<pre><code># File: ctk/integrations/importers/my_format.py\nfrom ctk.core.plugin import ImporterPlugin\nfrom ctk.core.models import ConversationTree, Message, MessageContent, MessageRole\n\nclass MyFormatImporter(ImporterPlugin):\n    name = \"my_format\"\n    description = \"Import from My Custom Format\"\n    version = \"1.0.0\"\n\n    def validate(self, data):\n        \"\"\"Check if data is your format\"\"\"\n        return \"my_format_marker\" in str(data)\n\n    def import_data(self, data, **kwargs):\n        \"\"\"Convert data to ConversationTree objects\"\"\"\n        conversations = []\n\n        # Parse your format\n        tree = ConversationTree(\n            id=\"conv_1\",\n            title=\"Imported Conversation\"\n        )\n\n        # Add messages\n        msg = Message(\n            role=MessageRole.USER,\n            content=MessageContent(text=\"Hello\")\n        )\n        tree.add_message(msg)\n\n        conversations.append(tree)\n        return conversations\n</code></pre> <p>The plugin is automatically discovered when placed in the integrations folder!</p>"},{"location":"#database-schema","title":"\ud83d\uddc4\ufe0f Database Schema","text":"<p>CTK uses SQLite with the following structure:</p> <ul> <li>conversations - Metadata, title, timestamps, source, model</li> <li>messages - Content, role, parent/child relationships</li> <li>tags - Searchable tags per conversation</li> <li>paths - Cached conversation paths for fast retrieval</li> </ul>"},{"location":"#privacy-security","title":"\ud83d\udd10 Privacy &amp; Security","text":"<ul> <li>100% Local - No data leaves your machine</li> <li>No Analytics - No telemetry or tracking</li> <li>Optional Sanitization - Remove sensitive data before sharing</li> <li>Configurable Rules - Add custom patterns to mask</li> </ul>"},{"location":"#roadmap","title":"\ud83d\uddfa\ufe0f Roadmap","text":""},{"location":"#completed","title":"Completed \u2705","text":"<ul> <li>[x] Terminal UI with conversation management</li> <li>[x] Rich console output with tables</li> <li>[x] Natural language queries (ask command)</li> <li>[x] Star/pin/archive organization</li> <li>[x] Multiple export formats (JSONL, JSON, Markdown, HTML5, Hugo)</li> <li>[x] MCP tool integration</li> <li>[x] Auto-tagging with LLM</li> <li>[x] Database merge/diff operations</li> <li>[x] Shell-first mode with VFS navigation</li> <li>[x] Hugo static site export</li> </ul>"},{"location":"#in-progress","title":"In Progress \ud83d\udd28","text":"<ul> <li>[ ] Embeddings and similarity search (complex-network-rag integration)</li> <li>[ ] Unit and integration test coverage</li> <li>[ ] Performance optimization for large databases</li> </ul>"},{"location":"#planned","title":"Planned \ud83d\udccb","text":"<ul> <li>[ ] Web-based UI (complement to TUI)</li> <li>[ ] Conversation deduplication utilities</li> <li>[ ] LangChain/LlamaIndex integration</li> <li>[ ] Advanced analytics dashboard</li> </ul>"},{"location":"#development","title":"\ud83e\uddea Development","text":"<pre><code># Run all tests\nmake test\n\n# Run unit tests only\nmake test-unit\n\n# Run integration tests only\nmake test-integration\n\n# Run with coverage report\nmake coverage\n\n# Format code (black + isort)\nmake format\n\n# Lint code (flake8 + mypy)\nmake lint\n\n# Clean build artifacts\nmake clean\n\n# View all Makefile targets\nmake help\n</code></pre>"},{"location":"#license","title":"\ud83d\udcdd License","text":"<p>MIT</p>"},{"location":"#contributing","title":"\ud83e\udd1d Contributing","text":"<p>Contributions welcome! To add support for a new provider:</p> <ol> <li>Create importer in <code>ctk/integrations/importers/provider_name.py</code></li> <li>Implement <code>validate()</code> and <code>import_data()</code> methods</li> <li>Add tests in <code>tests/</code></li> <li>Submit PR</li> </ol>"},{"location":"#acknowledgments","title":"\ud83d\ude4f Acknowledgments","text":"<p>Built to solve the fragmentation of AI conversations across platforms. Special thanks to all contributors!</p>"},{"location":"advanced/architecture/","title":"CTK Architecture","text":""},{"location":"advanced/architecture/#overview","title":"Overview","text":"<p>CTK (Conversation Toolkit) is designed with a modular, plugin-based architecture that allows for multiple interfaces and extensible import/export capabilities. At its core, CTK treats all conversations as tree structures, providing a unified model that can represent both linear and branching conversations.</p>"},{"location":"advanced/architecture/#core-principles","title":"Core Principles","text":"<ol> <li>Tree-First Design: All conversations are trees. Linear conversations are simply trees with a single path.</li> <li>Plugin Architecture: Import/export formats are discovered and loaded dynamically.</li> <li>Multiple Interfaces: The same core functionality is exposed through CLI, REST API, MCP, and other interfaces.</li> <li>Provider Agnostic: Unified data model works across all AI providers (OpenAI, Anthropic, etc.).</li> </ol>"},{"location":"advanced/architecture/#directory-structure","title":"Directory Structure","text":"<pre><code>ctk/\n\u251c\u2500\u2500 core/                   # Core data models and database\n\u2502   \u251c\u2500\u2500 models.py          # Tree-based conversation model\n\u2502   \u251c\u2500\u2500 database.py        # SQLAlchemy database layer\n\u2502   \u251c\u2500\u2500 db_models.py       # Database schema\n\u2502   \u251c\u2500\u2500 plugin.py          # Plugin system\n\u2502   \u2514\u2500\u2500 config.py          # Configuration management\n\u2502\n\u251c\u2500\u2500 integrations/          # Import/Export plugins\n\u2502   \u251c\u2500\u2500 importers/         # Provider-specific importers\n\u2502   \u2502   \u251c\u2500\u2500 openai.py\n\u2502   \u2502   \u251c\u2500\u2500 anthropic.py\n\u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 exporters/         # Format-specific exporters\n\u2502       \u251c\u2500\u2500 jsonl.py\n\u2502       \u251c\u2500\u2500 markdown.py\n\u2502       \u2514\u2500\u2500 json.py\n\u2502\n\u251c\u2500\u2500 interfaces/            # Multiple interface implementations\n\u2502   \u251c\u2500\u2500 base.py           # Base interface class\n\u2502   \u251c\u2500\u2500 rest/             # RESTful API\n\u2502   \u2502   \u2514\u2500\u2500 api.py\n\u2502   \u251c\u2500\u2500 mcp/              # Model Context Protocol\n\u2502   \u251c\u2500\u2500 web/              # Web frontend\n\u2502   \u2514\u2500\u2500 cli_v2/           # Enhanced CLI\n\u2502\n\u2514\u2500\u2500 cli.py                # Main CLI entry point\n</code></pre>"},{"location":"advanced/architecture/#data-model","title":"Data Model","text":""},{"location":"advanced/architecture/#conversationtree","title":"ConversationTree","text":"<p>The central data structure that represents all conversations:</p> <pre><code>@dataclass\nclass ConversationTree:\n    id: str                              # Unique identifier\n    title: Optional[str]                 # Conversation title\n    metadata: ConversationMetadata       # Source, model, tags, etc.\n    message_map: Dict[str, Message]      # All messages by ID\n    root_message_ids: List[str]          # Entry points to the tree\n</code></pre>"},{"location":"advanced/architecture/#message","title":"Message","text":"<p>Individual messages in the tree:</p> <pre><code>@dataclass\nclass Message:\n    id: str                              # Unique identifier\n    role: MessageRole                    # User, assistant, system, etc.\n    content: MessageContent              # Text, media, tool calls\n    timestamp: Optional[datetime]\n    parent_id: Optional[str]            # Tree structure\n    metadata: Dict[str, Any]\n</code></pre>"},{"location":"advanced/architecture/#tree-structure","title":"Tree Structure","text":"<p>Messages form a directed acyclic graph (DAG): - Each message can have one parent (except roots) - Each message can have multiple children (branching) - Paths through the tree represent conversation flows</p>"},{"location":"advanced/architecture/#database-schema","title":"Database Schema","text":"<p>SQLAlchemy-based schema with proper relationships:</p> <ol> <li>conversations - Metadata and root information</li> <li>messages - All messages with parent-child relationships</li> <li>tags - Categorization system</li> <li>paths - Cached conversation paths for performance</li> </ol>"},{"location":"advanced/architecture/#plugin-system","title":"Plugin System","text":""},{"location":"advanced/architecture/#auto-discovery","title":"Auto-Discovery","text":"<p>Plugins are automatically discovered when placed in the appropriate directory:</p> <pre><code>class ImporterPlugin(ABC):\n    name: str\n    description: str\n\n    @abstractmethod\n    def validate(self, data) -&gt; bool:\n        \"\"\"Check if this importer can handle the data\"\"\"\n\n    @abstractmethod\n    def import_data(self, data) -&gt; List[ConversationTree]:\n        \"\"\"Import and return conversation trees\"\"\"\n</code></pre>"},{"location":"advanced/architecture/#registry","title":"Registry","text":"<p>The plugin registry maintains all available importers/exporters:</p> <pre><code>registry.import_file(\"data.json\")  # Auto-detects format\nregistry.get_exporter(\"markdown\")  # Get specific exporter\n</code></pre>"},{"location":"advanced/architecture/#interfaces","title":"Interfaces","text":""},{"location":"advanced/architecture/#fluent-python-api","title":"Fluent Python API","text":"<p>Pythonic, chainable API for programmatic use:</p> <pre><code>from ctk import CTK, conversation, load\n\n# Quick operations\nCTK.load(\"chat.json\").export_as(\"markdown\").save(\"chat.md\")\n\n# Build conversations\nconv = (conversation(\"Python Help\")\n    .user(\"How does async work?\")\n    .assistant(\"Async allows concurrent execution...\")\n    .with_tags(\"python\", \"async\")\n    .build())\n\n# Database operations\nctk = CTK(\"conversations.db\")\nresults = ctk.search(\"machine learning\")\n    .in_source(\"ChatGPT\")\n    .with_model(\"gpt-4\")\n    .limit(20)\n    .get()\n\n# Complex pipelines\nload(\"all_chats.json\")\n    .filter(lambda c: \"python\" in c.title.lower())\n    .add_tags(\"technical\")\n    .export_as(\"jsonl\")\n    .save(\"training.jsonl\")\n</code></pre>"},{"location":"advanced/architecture/#base-interface","title":"Base Interface","text":"<p>All interfaces implement a common base class:</p> <pre><code>class BaseInterface(ABC):\n    @abstractmethod\n    def import_conversations(...)\n\n    @abstractmethod\n    def export_conversations(...)\n\n    @abstractmethod\n    def search_conversations(...)\n\n    @abstractmethod\n    def list_conversations(...)\n</code></pre>"},{"location":"advanced/architecture/#rest-api","title":"REST API","text":"<p>Flask-based REST API for web integration:</p> <pre><code>GET    /api/conversations        # List all\nGET    /api/conversations/&lt;id&gt;   # Get specific\nPOST   /api/conversations/search # Search\nPOST   /api/import              # Import data\nPOST   /api/export              # Export data\n</code></pre>"},{"location":"advanced/architecture/#cli","title":"CLI","text":"<p>Command-line interface for terminal usage:</p> <pre><code>ctk import data.json\nctk export output.md --format markdown\nctk search \"python async\"\n</code></pre>"},{"location":"advanced/architecture/#mcp-model-context-protocol","title":"MCP (Model Context Protocol)","text":"<p>Integration with AI assistants and tools (coming soon).</p>"},{"location":"advanced/architecture/#web-frontend","title":"Web Frontend","text":"<p>Browser-based interface for non-technical users.</p>"},{"location":"advanced/architecture/#export-formats","title":"Export Formats","text":""},{"location":"advanced/architecture/#json-native-ctk-format","title":"JSON (Native CTK Format)","text":"<p>Preserves full tree structure:</p> <pre><code>{\n  \"format\": \"ctk\",\n  \"version\": \"2.0.0\",\n  \"conversations\": [{\n    \"id\": \"...\",\n    \"messages\": {},\n    \"root_message_ids\": []\n  }]\n}\n</code></pre>"},{"location":"advanced/architecture/#markdown","title":"Markdown","text":"<p>Human-readable format with optional tree visualization:</p> <pre><code># Conversation Title\n\n## Metadata\n| Field | Value |\n|-------|-------|\n| Source | ChatGPT |\n\n## Conversation\n### \ud83d\udc64 User\nQuestion...\n\n### \ud83e\udd16 Assistant\nResponse...\n</code></pre>"},{"location":"advanced/architecture/#jsonl","title":"JSONL","text":"<p>For fine-tuning and data pipelines:</p> <pre><code>{\"messages\": [{\"role\": \"user\", \"content\": \"...\"}, ...]}\n{\"messages\": [{\"role\": \"user\", \"content\": \"...\"}, ...]}\n</code></pre>"},{"location":"advanced/architecture/#path-selection-strategies","title":"Path Selection Strategies","text":"<p>When exporting linear formats from branching conversations:</p> <ol> <li>longest - Select the path with most messages</li> <li>first - Select the first (original) path</li> <li>last - Select the most recent path</li> <li>all - Export all paths separately</li> </ol>"},{"location":"advanced/architecture/#future-extensions","title":"Future Extensions","text":""},{"location":"advanced/architecture/#planned-features","title":"Planned Features","text":"<ol> <li>Embeddings &amp; Semantic Search: Vector database integration</li> <li>Conversation Merging: Combine related conversations</li> <li>Real-time Sync: Live updates from provider APIs</li> <li>Analytics Dashboard: Usage patterns and insights</li> <li>LangChain Integration: Use as a memory store</li> </ol>"},{"location":"advanced/architecture/#extension-points","title":"Extension Points","text":"<ol> <li>Custom Importers: Add support for new providers</li> <li>Custom Exporters: Create specialized output formats</li> <li>Interface Plugins: Build new ways to interact with CTK</li> <li>Processing Pipelines: Transform conversations in bulk</li> </ol>"},{"location":"advanced/architecture/#development","title":"Development","text":""},{"location":"advanced/architecture/#adding-a-new-importer","title":"Adding a New Importer","text":"<ol> <li>Create file in <code>ctk/integrations/importers/</code></li> <li>Inherit from <code>ImporterPlugin</code></li> <li>Implement <code>validate()</code> and <code>import_data()</code></li> <li>Plugin is auto-discovered</li> </ol>"},{"location":"advanced/architecture/#adding-a-new-interface","title":"Adding a New Interface","text":"<ol> <li>Create directory in <code>ctk/interfaces/</code></li> <li>Inherit from <code>BaseInterface</code></li> <li>Implement required methods</li> <li>Add entry point or server script</li> </ol>"},{"location":"advanced/architecture/#testing","title":"Testing","text":"<pre><code>make test           # Run all tests\nmake test-unit      # Unit tests only\nmake coverage       # Coverage report\n</code></pre>"},{"location":"advanced/architecture/#performance-considerations","title":"Performance Considerations","text":"<ol> <li>Lazy Loading: Messages loaded on-demand</li> <li>Path Caching: Common paths pre-computed</li> <li>Indexed Search: Full-text search via SQLite FTS</li> <li>Batch Operations: Bulk import/export support</li> <li>Connection Pooling: Reuse database connections</li> </ol>"},{"location":"advanced/plugins/","title":"Creating Plugins","text":"<p>CTK uses a plugin architecture for importers and exporters. Plugins are auto-discovered when placed in the integrations folder.</p>"},{"location":"advanced/plugins/#plugin-types","title":"Plugin Types","text":"<ul> <li>Importers: Convert external formats to ConversationTree</li> <li>Exporters: Convert ConversationTree to external formats</li> </ul>"},{"location":"advanced/plugins/#creating-an-importer","title":"Creating an Importer","text":"<pre><code># File: ctk/integrations/importers/my_format.py\nfrom ctk.core.plugin import ImporterPlugin\nfrom ctk.core.models import (\n    ConversationTree, Message, MessageContent, MessageRole\n)\n\nclass MyFormatImporter(ImporterPlugin):\n    name = \"my_format\"\n    description = \"Import from My Custom Format\"\n    version = \"1.0.0\"\n\n    def validate(self, data):\n        \"\"\"Check if data matches this format\"\"\"\n        return \"my_format_marker\" in str(data)\n\n    def import_data(self, data, **kwargs):\n        \"\"\"Convert data to ConversationTree objects\"\"\"\n        conversations = []\n\n        tree = ConversationTree(\n            id=\"conv_1\",\n            title=\"Imported Conversation\"\n        )\n\n        msg = Message(\n            role=MessageRole.USER,\n            content=MessageContent(text=\"Hello\")\n        )\n        tree.add_message(msg)\n\n        conversations.append(tree)\n        return conversations\n\n# Plugin is auto-discovered!\n</code></pre>"},{"location":"advanced/plugins/#creating-an-exporter","title":"Creating an Exporter","text":"<pre><code># File: ctk/integrations/exporters/my_format.py\nfrom ctk.core.plugin import ExporterPlugin\nfrom ctk.core.models import ConversationTree\n\nclass MyFormatExporter(ExporterPlugin):\n    name = \"my_format\"\n    description = \"Export to My Custom Format\"\n    version = \"1.0.0\"\n\n    def validate(self, data):\n        \"\"\"Exporters typically return False\"\"\"\n        return False\n\n    def export_data(self, conversations, **kwargs):\n        \"\"\"Convert conversations to your format\"\"\"\n        output = []\n        for conv in conversations:\n            # Process conversation\n            output.append({\"title\": conv.title})\n        return output\n\n    def export_to_file(self, conversations, file_path, **kwargs):\n        \"\"\"Export to file\"\"\"\n        data = self.export_data(conversations, **kwargs)\n        with open(file_path, 'w') as f:\n            json.dump(data, f)\n</code></pre>"},{"location":"advanced/plugins/#core-models","title":"Core Models","text":""},{"location":"advanced/plugins/#conversationtree","title":"ConversationTree","text":"<pre><code>tree = ConversationTree(\n    id=\"unique_id\",\n    title=\"Conversation Title\"\n)\n\n# Add messages\ntree.add_message(msg, parent_id=None)  # Root message\ntree.add_message(msg2, parent_id=msg.id)  # Child message\n\n# Navigate tree\npaths = tree.get_all_paths()\nlongest = tree.get_longest_path()\n</code></pre>"},{"location":"advanced/plugins/#message","title":"Message","text":"<pre><code>msg = Message(\n    id=\"msg_id\",  # Auto-generated if not provided\n    role=MessageRole.USER,  # USER, ASSISTANT, SYSTEM, TOOL\n    content=MessageContent(text=\"Hello\"),\n    timestamp=datetime.now(),\n    metadata={\"custom\": \"data\"}\n)\n</code></pre>"},{"location":"advanced/plugins/#messagecontent","title":"MessageContent","text":"<pre><code>content = MessageContent(\n    text=\"Message text\",\n    parts=[\"Part 1\", \"Part 2\"],\n    images=[MediaContent(url=\"path/to/image.png\")],\n    metadata={}\n)\n</code></pre>"},{"location":"advanced/plugins/#listing-plugins","title":"Listing Plugins","text":"<pre><code>ctk plugins\n</code></pre>"},{"location":"advanced/plugins/#plugin-discovery","title":"Plugin Discovery","text":"<p>Plugins are discovered in: - <code>ctk/integrations/importers/</code> - <code>ctk/integrations/exporters/</code></p> <p>Any Python file with a class inheriting from <code>ImporterPlugin</code> or <code>ExporterPlugin</code> is automatically registered.</p>"},{"location":"advanced/resilience/","title":"Resilience Guide: Using CTK for Long-Term Preservation","text":"<p>\"Not resurrection. Not immortality. Just love that still responds.\"</p>"},{"location":"advanced/resilience/#philosophy","title":"Philosophy","text":"<p>If you're preserving conversations that matter\u2014teaching moments with students, advice for your children, knowledge to pass down\u2014you need more than just backups. You need resilience across decades.</p> <p>This guide shows how to use CTK with a long-term mindset: designing for graceful degradation, multiple fallback layers, and recovery by people who may not have access to the original tools.</p>"},{"location":"advanced/resilience/#core-principles","title":"Core Principles","text":""},{"location":"advanced/resilience/#1-graceful-degradation","title":"1. Graceful Degradation","text":"<p>Every system eventually fails. Design for progressive fallback: - Best case: CTK works perfectly (complex-net RAG, semantic search, full API) - Good case: Database queryable with SQLite directly - Fallback case: JSONL files greppable with basic tools - Ultimate fallback: Plain text readable in any editor</p>"},{"location":"advanced/resilience/#2-self-documentation","title":"2. Self-Documentation","text":"<p>Assume the person finding this archive has no context: - Clear README explaining what this is - Multiple entry points (GUI, CLI, text files) - Recovery instructions for various scenarios - No assumptions about available software</p>"},{"location":"advanced/resilience/#3-format-redundancy","title":"3. Format Redundancy","text":"<p>Store the same data in multiple formats: - Structured (SQLite) - queryable, efficient - Semi-structured (JSONL) - machine-readable, greppable - Human-readable (Markdown) - understandable without tools - Universal (HTML) - viewable in any browser - Plain text - ultimate fallback</p>"},{"location":"advanced/resilience/#4-offline-first","title":"4. Offline-First","text":"<p>Design to work without internet: - All data stored locally - No cloud dependencies - Self-contained recovery tools - Portable across systems</p>"},{"location":"advanced/resilience/#creating-a-resilience-package","title":"Creating a Resilience Package","text":""},{"location":"advanced/resilience/#step-1-import-all-your-conversations","title":"Step 1: Import All Your Conversations","text":"<pre><code># Import from various sources\nctk import chatgpt_export.json --db life.db --format openai --tags \"chatgpt,archive\"\nctk import claude_export.json --db life.db --format anthropic --tags \"claude,archive\"\nctk import copilot_sessions/ --db life.db --format copilot --tags \"coding,archive\"\n\n# Verify what you have\nctk stats --db life.db\n</code></pre>"},{"location":"advanced/resilience/#step-2-export-in-multiple-formats","title":"Step 2: Export in Multiple Formats","text":"<pre><code># Create archive directory\nmkdir -p archive\n\n# Copy the database (Level 1: Best - full CTK functionality)\ncp life.db archive/conversations.db\n\n# Export as JSONL (Level 2: Good - greppable, machine-readable)\nctk export archive/conversations.jsonl --db life.db --format jsonl\n\n# Export as Markdown (Level 3: Good - human-readable)\nctk export archive/conversations.md --db life.db --format markdown --include-metadata\n\n# Export as HTML (Level 4: Fallback - browseable in any browser)\nctk export archive/index.html --db life.db --format html\n\n# Export as plain text (Level 5: Ultimate fallback)\nsqlite3 life.db \"SELECT\n  c.title,\n  m.role,\n  m.content\nFROM conversations c\nJOIN messages m ON c.id = m.conversation_id\nORDER BY c.created_at, m.created_at\" &gt; archive/all_conversations.txt\n</code></pre>"},{"location":"advanced/resilience/#step-3-create-recovery-documentation","title":"Step 3: Create Recovery Documentation","text":"<p>Create <code>archive/START_HERE.txt</code>:</p> <pre><code>================================================================================\n                    CONVERSATION ARCHIVE\n                    (Start Here)\n================================================================================\n\nWHAT THIS IS:\n\nThis is an archive of conversations with AI assistants, preserved using CTK\n(Conversation Toolkit). It's designed to be recoverable even if the original\nsoftware no longer works.\n\nWHAT YOU CAN DO (from simplest to most powerful):\n\n1. READ THE TEXT FILES\n   - Open \"all_conversations.txt\" in any text editor\n   - Browse \"conversations.md\" for formatted version\n   - Open \"index.html\" in any web browser\n\n2. SEARCH WITH GREP (if you have a terminal)\n   - grep -r \"your search term\" .\n   - grep -i \"debugging\" conversations.jsonl\n   - Find anything by keyword instantly\n\n3. USE THE DATABASE (if you have SQLite)\n   - sqlite3 conversations.db\n   - SELECT * FROM conversations WHERE title LIKE '%python%';\n   - Full SQL queries available\n\n4. REBUILD CTK (if you have Python)\n   - pip install ctk\n   - ctk list --db conversations.db\n   - ctk search \"your query\" --db conversations.db\n   - ctk chat --db conversations.db\n\n================================================================================\n                            FILE GUIDE\n================================================================================\n\nconversations.db          SQLite database (use with CTK or sqlite3)\nconversations.jsonl       All conversations, one JSON per line (greppable)\nconversations.md          Human-readable markdown format\nindex.html                Browse in any web browser\nall_conversations.txt     Plain text fallback (readable in notepad)\nSTART_HERE.txt            This file\nRECOVERY.md               Detailed recovery instructions\n\n================================================================================\n\nCreated: [DATE]\nCTK Version: [VERSION]\nTotal Conversations: [COUNT]\n\nThis archive was designed to last decades. You should be able to recover\nyour conversations even if Python, CTK, or SQLite no longer exist.\n\n================================================================================\n</code></pre> <p>Create <code>archive/RECOVERY.md</code>:</p> <pre><code># Recovery Instructions\n\n## Scenario 1: CTK Still Works\n\n```bash\npip install ctk\nctk list --db conversations.db\nctk search \"your query\" --db conversations.db\nctk chat --db conversations.db  # Interactive TUI\n</code></pre>"},{"location":"advanced/resilience/#scenario-2-sqlite-works-ctk-doesnt","title":"Scenario 2: SQLite Works, CTK Doesn't","text":"<pre><code># View all conversations\nsqlite3 conversations.db \"SELECT id, title, source FROM conversations;\"\n\n# Search conversations\nsqlite3 conversations.db \"SELECT title, content FROM messages WHERE content LIKE '%debugging%';\"\n\n# Export to CSV\nsqlite3 -csv conversations.db \"SELECT * FROM conversations;\" &gt; export.csv\n</code></pre>"},{"location":"advanced/resilience/#scenario-3-only-basic-tools-available","title":"Scenario 3: Only Basic Tools Available","text":"<pre><code># Search with grep\ngrep -r \"python\" .\n\n# Search JSONL\ngrep \"async\" conversations.jsonl\n\n# View plain text\ncat all_conversations.txt | less\n</code></pre>"},{"location":"advanced/resilience/#scenario-4-only-a-web-browser","title":"Scenario 4: Only a Web Browser","text":"<p>Open <code>index.html</code> in any browser. The HTML export includes: - Browseable conversation list - Full-text search (JavaScript) - Readable formatting - No server required</p>"},{"location":"advanced/resilience/#scenario-5-nothing-works-except-text-editor","title":"Scenario 5: Nothing Works Except Text Editor","text":"<p>Open <code>all_conversations.txt</code> in any text editor (notepad, vim, etc.) All conversations are stored as plain text.</p>"},{"location":"advanced/resilience/#rebuilding-from-source","title":"Rebuilding From Source","text":"<p>If CTK is no longer available via pip:</p> <ol> <li>The CTK source code is at: https://github.com/yourusername/ctk</li> <li>Clone or download the repository</li> <li>Install: <code>pip install -e /path/to/ctk</code></li> <li>Use as normal</li> </ol> <p>If GitHub is gone, CTK's source code is included in <code>ctk_source/</code> directory. <pre><code>### Step 4: Test Recovery\n\nTest each fallback level actually works:\n\n```bash\n# Test 1: Can you grep?\ngrep -r \"debugging\" archive/\n\n# Test 2: Can you use SQLite directly?\nsqlite3 archive/conversations.db \"SELECT COUNT(*) FROM conversations;\"\n\n# Test 3: Can you read plain text?\ncat archive/all_conversations.txt | head -n 20\n\n# Test 4: Can you view HTML?\nopen archive/index.html  # or firefox, chrome, etc.\n\n# Test 5: Can you rebuild CTK?\npip install ctk\nctk list --db archive/conversations.db\n</code></pre></p>"},{"location":"advanced/resilience/#step-5-store-redundantly","title":"Step 5: Store Redundantly","text":"<p>Copy your archive to multiple locations:</p> <pre><code># Local backup\ncp -r archive /backup/conversations_$(date +%Y%m%d)\n\n# External drive\ncp -r archive /media/external_drive/\n\n# Cloud storage (encrypted if sharing)\ntar -czf conversations_archive.tar.gz archive/\ngpg -c conversations_archive.tar.gz  # Encrypt\n# Upload to cloud storage\n\n# Physical backup (USB drive in safe deposit box)\ncp -r archive /media/usb_drive/\n</code></pre>"},{"location":"advanced/resilience/#advanced-temporal-analysis","title":"Advanced: Temporal Analysis","text":"<p>If you want to understand how your thinking evolved over time:</p> <pre><code># Find all conversations from a specific time period\nctk list --db life.db --date-from 2020-01-01 --date-to 2020-12-31\n\n# Track topic evolution\nctk search \"async programming\" --db life.db --date-from 2020-01-01 &gt; 2020_async.md\nctk search \"async programming\" --db life.db --date-from 2024-01-01 &gt; 2024_async.md\n\n# Compare to see how understanding evolved\ndiff 2020_async.md 2024_async.md\n</code></pre>"},{"location":"advanced/resilience/#maintaining-the-archive","title":"Maintaining the Archive","text":""},{"location":"advanced/resilience/#regular-updates","title":"Regular Updates","text":"<pre><code># Import new conversations monthly\nctk import new_export.json --db life.db\n\n# Re-export everything\n./create_resilience_package.sh\n\n# Update backup copies\nrsync -av archive/ /backup/conversations/\n</code></pre>"},{"location":"advanced/resilience/#verification","title":"Verification","text":"<p>Periodically verify your archive:</p> <pre><code># Check database integrity\nsqlite3 life.db \"PRAGMA integrity_check;\"\n\n# Verify exports match database\nctk stats --db life.db\nwc -l archive/conversations.jsonl\n\n# Test recovery procedures\n./test_recovery.sh\n</code></pre>"},{"location":"advanced/resilience/#example-recovery-package-script","title":"Example Recovery Package Script","text":"<p>Create <code>create_resilience_package.sh</code>:</p> <pre><code>#!/bin/bash\n# Create a complete resilience package\n\nset -e\n\nDB=\"life.db\"\nARCHIVE=\"archive_$(date +%Y%m%d)\"\n\nmkdir -p \"$ARCHIVE\"\n\necho \"Creating resilience package...\"\n\n# Copy database\ncp \"$DB\" \"$ARCHIVE/conversations.db\"\n\n# Export multiple formats\nctk export \"$ARCHIVE/conversations.jsonl\" --db \"$DB\" --format jsonl\nctk export \"$ARCHIVE/conversations.md\" --db \"$DB\" --format markdown\nctk export \"$ARCHIVE/index.html\" --db \"$DB\" --format html\n\n# Plain text fallback\nsqlite3 \"$DB\" \"SELECT c.title, m.role, m.content FROM conversations c JOIN messages m ON c.id = m.conversation_id ORDER BY c.created_at, m.created_at\" &gt; \"$ARCHIVE/all_conversations.txt\"\n\n# Create documentation\ncat &gt; \"$ARCHIVE/START_HERE.txt\" &lt;&lt; 'EOF'\n[Documentation content from above]\nEOF\n\n# Get stats\nCONV_COUNT=$(sqlite3 \"$DB\" \"SELECT COUNT(*) FROM conversations;\")\nMSG_COUNT=$(sqlite3 \"$DB\" \"SELECT COUNT(*) FROM messages;\")\n\n# Update metadata in START_HERE.txt\nsed -i \"s/\\[DATE\\]/$(date)/\" \"$ARCHIVE/START_HERE.txt\"\nsed -i \"s/\\[COUNT\\]/$CONV_COUNT conversations, $MSG_COUNT messages/\" \"$ARCHIVE/START_HERE.txt\"\n\necho \"\u2713 Created resilience package in $ARCHIVE/\"\necho \"  $CONV_COUNT conversations\"\necho \"  $MSG_COUNT messages\"\necho \"  Ready for 50+ year storage\"\n</code></pre>"},{"location":"advanced/resilience/#philosophy-in-practice","title":"Philosophy in Practice","text":""},{"location":"advanced/resilience/#why-this-matters","title":"Why This Matters","text":"<p>Conversations with AI assistants can contain: - Teaching moments you want to preserve for students - Advice for your children - Solved problems future you will forget - Creative work you don't want to lose - Personal growth tracked over time</p> <p>These deserve more than \"just backup the files.\" They deserve a preservation strategy.</p>"},{"location":"advanced/resilience/#design-assumptions","title":"Design Assumptions","text":"<p>This approach assumes: 1. Software changes: Python, CTK, SQLite might not exist in 50 years 2. Formats persist: Plain text, JSON, HTML will always be readable 3. Basic tools survive: grep, text editors, web browsers won't go away 4. Humans can rebuild: Given source code and docs, someone can recreate CTK</p>"},{"location":"advanced/resilience/#testing-long-term-viability","title":"Testing Long-Term Viability","text":"<p>Try this thought experiment:</p> <p>\"If someone found this USB drive in 2074, could they: 1. Figure out what it is? \u2713 START_HERE.txt explains 2. Read the content? \u2713 Plain text and HTML work 3. Search for specific topics? \u2713 grep works 4. Rebuild full functionality? \u2713 Source code and docs included\"</p> <p>If you can answer \"yes\" to all four, you have a resilient archive.</p>"},{"location":"advanced/resilience/#resources","title":"Resources","text":"<ul> <li>CTK Documentation: See main README.md</li> <li>Example Archives: See examples/resilience_package/</li> <li>Discussion: Philosophy behind this approach</li> <li>Blog Post: [Link to blog post about Long Echo philosophy]</li> </ul>"},{"location":"advanced/resilience/#contributing","title":"Contributing","text":"<p>If you have ideas for improving resilience: - Better fallback formats? - More recovery scenarios? - Improved documentation?</p> <p>Please contribute to CTK or share your approach!</p> <p>This guide was inspired by the \"Long Echo\" philosophy: preserving not just data, but the ability to find meaning in that data across decades. Not resurrection. Not immortality. Just care and knowledge that still responds.</p>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#from-pypi","title":"From PyPI","text":"<pre><code>pip install conversation-tk\n</code></pre>"},{"location":"getting-started/installation/#from-source","title":"From Source","text":"<pre><code>git clone https://github.com/yourusername/ctk.git\ncd ctk\npip install -e .\n</code></pre>"},{"location":"getting-started/installation/#development-setup","title":"Development Setup","text":"<pre><code>git clone https://github.com/yourusername/ctk.git\ncd ctk\nmake install\nsource venv/bin/activate\n</code></pre>"},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.8 or higher</li> <li>No external dependencies for core functionality</li> <li>Optional: <code>rich</code> for enhanced terminal output</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":""},{"location":"getting-started/quickstart/#import-your-conversations","title":"Import Your Conversations","text":"<pre><code># Import ChatGPT export\nctk import chatgpt_export.json --db my_chats.db\n\n# Import Claude export\nctk import claude_export.json --db my_chats.db --format anthropic\n\n# Import GitHub Copilot\nctk import ~/.vscode/workspaceStorage --db my_chats.db --format copilot\n</code></pre>"},{"location":"getting-started/quickstart/#search-and-browse","title":"Search and Browse","text":"<pre><code># List all conversations\nctk list --db my_chats.db\n\n# Search for specific topics\nctk search \"python async\" --db my_chats.db\n\n# Natural language queries\nctk ask \"show me conversations about machine learning\" --db my_chats.db\n</code></pre>"},{"location":"getting-started/quickstart/#interactive-mode","title":"Interactive Mode","text":"<pre><code># Launch the TUI\nctk chat --db my_chats.db\n</code></pre>"},{"location":"getting-started/quickstart/#export","title":"Export","text":"<pre><code># Export for fine-tuning\nctk export training.jsonl --db my_chats.db --format jsonl\n\n# Export to Hugo for your blog\nctk export content/conversations/ --format hugo --db my_chats.db --starred\n\n# Export to interactive HTML\nctk export archive.html --format html --db my_chats.db\n</code></pre>"},{"location":"guide/chat-tui/","title":"Chat TUI","text":"<p>The Terminal User Interface provides interactive conversation management and live chat.</p>"},{"location":"guide/chat-tui/#starting-the-tui","title":"Starting the TUI","text":"<pre><code>ctk chat --db chats.db\n</code></pre>"},{"location":"guide/chat-tui/#features","title":"Features","text":"<ul> <li>Shell Mode: Unix-like navigation with VFS</li> <li>Chat Mode: Live conversation with LLM providers</li> <li>Rich Output: Color-coded messages, tables, tree views</li> <li>MCP Support: Model Context Protocol tool integration</li> </ul>"},{"location":"guide/chat-tui/#slash-commands","title":"Slash Commands","text":""},{"location":"guide/chat-tui/#navigation","title":"Navigation","text":"<pre><code>/browse              # Browse conversations table\n/show &lt;id&gt;           # Show conversation\n/tree &lt;id&gt;           # View tree structure\n/paths &lt;id&gt;          # List all paths\n</code></pre>"},{"location":"guide/chat-tui/#search","title":"Search","text":"<pre><code>/search &lt;query&gt;      # Full-text search\n/ask &lt;query&gt;         # Natural language query\n</code></pre>"},{"location":"guide/chat-tui/#organization","title":"Organization","text":"<pre><code>/star &lt;id&gt;           # Star conversation\n/pin &lt;id&gt;            # Pin conversation\n/archive &lt;id&gt;        # Archive conversation\n/title &lt;id&gt; &lt;title&gt;  # Rename\n</code></pre>"},{"location":"guide/chat-tui/#chat-operations","title":"Chat Operations","text":"<pre><code>/fork                # Fork current conversation\n/regenerate          # Regenerate last message\n/edit &lt;msg_id&gt;       # Edit a message\n/model &lt;name&gt;        # Switch LLM model\n</code></pre>"},{"location":"guide/chat-tui/#export","title":"Export","text":"<pre><code>/export &lt;format&gt;     # Export current conversation\n/tag                 # Auto-tag with LLM\n</code></pre>"},{"location":"guide/chat-tui/#system","title":"System","text":"<pre><code>/help                # Show all commands\n/quit                # Exit TUI\n</code></pre>"},{"location":"guide/chat-tui/#llm-providers","title":"LLM Providers","text":"<p>The TUI supports multiple providers:</p> <ul> <li>Ollama (local)</li> <li>OpenAI</li> <li>Anthropic</li> </ul> <p>Configure via environment variables or config file.</p>"},{"location":"guide/chat-tui/#keyboard-shortcuts","title":"Keyboard Shortcuts","text":"Key Action <code>Ctrl+D</code> Exit chat mode / Exit TUI <code>Tab</code> Auto-complete <code>Up/Down</code> Command history"},{"location":"guide/exporting/","title":"Exporting Conversations","text":"<p>CTK supports multiple export formats for different use cases.</p>"},{"location":"guide/exporting/#export-formats","title":"Export Formats","text":"Format Use Case <code>jsonl</code> Fine-tuning, data pipelines <code>json</code> Data interchange, backup <code>markdown</code> Human-readable documentation <code>html</code> Interactive browsing, archiving <code>hugo</code> Static site generation, blogging"},{"location":"guide/exporting/#jsonl-fine-tuning","title":"JSONL (Fine-tuning)","text":"<pre><code># Basic export\nctk export training.jsonl --db chats.db --format jsonl\n\n# With metadata\nctk export full.jsonl --db chats.db --format jsonl --include-metadata\n</code></pre>"},{"location":"guide/exporting/#hugo-static-sites","title":"Hugo (Static Sites)","text":"<p>Export conversations as Hugo page bundles:</p> <pre><code># Export all conversations\nctk export content/conversations/ --format hugo --db chats.db\n\n# Export only starred (curated for blog)\nctk export content/conversations/ --format hugo --db chats.db --starred\n\n# Export as drafts for review\nctk export content/conversations/ --format hugo --db chats.db --draft\n</code></pre> <p>Output structure: <pre><code>content/conversations/\n  2024-01-15-debugging-rust-abc123/\n    index.md        # Frontmatter + markdown\n    images/         # Media files\n</code></pre></p>"},{"location":"guide/exporting/#html-interactive-archive","title":"HTML (Interactive Archive)","text":"<pre><code># Single self-contained file (recommended)\nctk export archive.html --format html --db chats.db\n\n# With separate media folder (smaller HTML)\nctk export archive.html --format html --db chats.db --media-dir media\n\n# Multi-file (requires web server)\nctk export archive/ --format html --db chats.db --no-embed\n</code></pre>"},{"location":"guide/exporting/#filtering-exports","title":"Filtering Exports","text":"<pre><code># Specific conversations\nctk export out.jsonl --db chats.db --ids conv1 conv2 conv3\n\n# By source\nctk export chatgpt.json --db chats.db --filter-source \"ChatGPT\"\n\n# By model\nctk export gpt4.json --db chats.db --filter-model \"GPT-4\"\n\n# By tags\nctk export work.json --db chats.db --filter-tags \"work,important\"\n\n# Starred/pinned only\nctk export favorites.json --db chats.db --starred\n</code></pre>"},{"location":"guide/exporting/#sanitization","title":"Sanitization","text":"<p>Remove sensitive data before sharing:</p> <pre><code>ctk export clean.jsonl --db chats.db --format jsonl --sanitize\n</code></pre> <p>This removes: - API keys - Passwords and tokens - SSH keys - Database URLs</p>"},{"location":"guide/importing/","title":"Importing Conversations","text":"<p>CTK supports importing conversations from multiple AI providers.</p>"},{"location":"guide/importing/#supported-formats","title":"Supported Formats","text":"Format Provider Notes <code>openai</code> ChatGPT Preserves full tree structure including regenerations <code>anthropic</code> Claude Standard Claude export format <code>gemini</code> Google Gemini/Bard Google AI conversations <code>copilot</code> GitHub Copilot From VS Code workspace storage <code>jsonl</code> Various Generic JSONL for local LLMs"},{"location":"guide/importing/#chatgptopenai","title":"ChatGPT/OpenAI","text":"<p>Export your ChatGPT conversations from chat.openai.com/settings \u2192 Data Controls \u2192 Export</p> <pre><code># Auto-detect format\nctk import conversations.json --db chats.db\n\n# Explicit format with tags\nctk import chatgpt_export.json --db chats.db --format openai --tags \"work,2024\"\n</code></pre>"},{"location":"guide/importing/#claudeanthropic","title":"Claude/Anthropic","text":"<p>Export from Claude's settings page.</p> <pre><code>ctk import claude_export.json --db chats.db --format anthropic\n</code></pre>"},{"location":"guide/importing/#github-copilot","title":"GitHub Copilot","text":"<pre><code># Import from VS Code workspace storage\nctk import ~/.vscode/workspaceStorage --db chats.db --format copilot\n</code></pre>"},{"location":"guide/importing/#jsonl-format","title":"JSONL Format","text":"<p>For local LLMs and fine-tuning datasets:</p> <pre><code>ctk import training_data.jsonl --db chats.db --format jsonl\n\n# Import multiple files\nfor file in *.jsonl; do\n    ctk import \"$file\" --db chats.db --format jsonl\ndone\n</code></pre>"},{"location":"guide/importing/#import-options","title":"Import Options","text":"Option Description <code>--db</code> Database path (required) <code>--format</code> Explicit format (auto-detected if omitted) <code>--tags</code> Comma-separated tags to add <code>--project</code> Project name for organization"},{"location":"guide/searching/","title":"Searching &amp; Filtering","text":"<p>CTK provides powerful search capabilities across all your conversations.</p>"},{"location":"guide/searching/#basic-search","title":"Basic Search","text":"<pre><code># Full-text search\nctk search \"machine learning\" --db chats.db\n\n# Search with limit\nctk search \"python\" --db chats.db --limit 20\n</code></pre>"},{"location":"guide/searching/#filtering","title":"Filtering","text":"<pre><code># Filter by source\nctk search \"python\" --db chats.db --source ChatGPT\n\n# Filter by model\nctk search \"code\" --db chats.db --model GPT-4\n\n# Filter by tags\nctk search \"tutorial\" --db chats.db --tags \"code,learning\"\n\n# Date range\nctk search \"AI\" --db chats.db --date-from 2024-01-01 --date-to 2024-12-31\n</code></pre>"},{"location":"guide/searching/#natural-language-queries","title":"Natural Language Queries","text":"<p>Use the <code>ask</code> command for LLM-powered queries:</p> <pre><code>ctk ask \"show me starred conversations\" --db chats.db\nctk ask \"find discussions about async python\" --db chats.db\nctk ask \"conversations from last week about AI\" --db chats.db\n</code></pre>"},{"location":"guide/searching/#organization","title":"Organization","text":""},{"location":"guide/searching/#star-conversations","title":"Star Conversations","text":"<pre><code>ctk star abc123 --db chats.db\nctk star abc123 def456 --db chats.db  # Multiple\nctk star --unstar abc123 --db chats.db\n</code></pre>"},{"location":"guide/searching/#pin-conversations","title":"Pin Conversations","text":"<pre><code>ctk pin abc123 --db chats.db\nctk pin --unpin abc123 --db chats.db\n</code></pre>"},{"location":"guide/searching/#archive-conversations","title":"Archive Conversations","text":"<pre><code>ctk archive abc123 --db chats.db\nctk archive --unarchive abc123 --db chats.db\n</code></pre>"},{"location":"guide/searching/#list-with-filters","title":"List with Filters","text":"<pre><code>ctk list --db chats.db --starred\nctk list --db chats.db --pinned\nctk list --db chats.db --archived\nctk list --db chats.db --json  # JSON output\n</code></pre>"},{"location":"guide/shell-mode/","title":"Shell Mode","text":"<p>CTK provides a Unix-like shell interface for navigating and managing conversations through a Virtual Filesystem (VFS).</p>"},{"location":"guide/shell-mode/#starting-shell-mode","title":"Starting Shell Mode","text":"<pre><code>ctk chat --db chats.db\n</code></pre>"},{"location":"guide/shell-mode/#vfs-structure","title":"VFS Structure","text":"<p>Conversations are exposed as a filesystem:</p> <pre><code>/\n\u251c\u2500\u2500 chats/              # All conversations by ID\n\u2502   \u2514\u2500\u2500 &lt;conv-id&gt;/      # Individual conversation\n\u2502       \u2514\u2500\u2500 m1/m2/m3    # Message tree\n\u251c\u2500\u2500 starred/            # Starred conversations\n\u251c\u2500\u2500 pinned/             # Pinned conversations\n\u251c\u2500\u2500 archived/           # Archived conversations\n\u251c\u2500\u2500 tags/               # Conversations by tag\n\u251c\u2500\u2500 recent/             # Recent conversations\n\u251c\u2500\u2500 source/             # By source (ChatGPT, Claude, etc.)\n\u2514\u2500\u2500 model/              # By model (GPT-4, Claude-3, etc.)\n</code></pre>"},{"location":"guide/shell-mode/#navigation-commands","title":"Navigation Commands","text":"<pre><code>cd /chats               # Go to conversations\ncd abc123               # Navigate to conversation (prefix matching)\ncd m1/m2                # Navigate message tree\ncd ..                   # Go up\ncd /                    # Go to root\npwd                     # Print current path\nls                      # List contents\nls -l                   # Long format with metadata\n</code></pre>"},{"location":"guide/shell-mode/#search","title":"Search","text":"<pre><code>find -name \"*python*\"           # Find by title\nfind -content \"async\"           # Find by content\nfind -role user                 # Find user messages\nfind -l                         # Rich table output\nfind -limit 10                  # Limit results\n</code></pre>"},{"location":"guide/shell-mode/#unix-commands","title":"Unix Commands","text":"<pre><code>cat text                # Show message content\nhead 5                  # First 5 lines\ntail 10                 # Last 10 lines\ngrep \"pattern\"          # Search in output\n</code></pre>"},{"location":"guide/shell-mode/#organization","title":"Organization","text":"<pre><code>star                    # Star current conversation\nunstar                  # Unstar\npin                     # Pin\nunpin                   # Unpin\narchive                 # Archive\nunarchive               # Unarchive\ntitle \"New Title\"       # Rename\n</code></pre>"},{"location":"guide/shell-mode/#piping","title":"Piping","text":"<pre><code>ls | grep python | head 5\nfind -name \"*ai*\" | head 10\ncat text | grep \"error\"\n</code></pre>"},{"location":"guide/shell-mode/#chat-mode","title":"Chat Mode","text":"<p>From shell mode, start chatting:</p> <pre><code>chat                    # Start chat in current conversation\n/exit                   # Return to shell mode\n</code></pre> <p>See the Shell Commands Reference for complete documentation.</p>"},{"location":"reference/api/","title":"CTK Fluent API Documentation","text":"<p>The CTK Fluent API provides a pythonic, chainable interface for working with conversations. It's designed to be intuitive, discoverable, and powerful.</p>"},{"location":"reference/api/#installation","title":"Installation","text":"<pre><code>from ctk import CTK, conversation, load, from_db\n</code></pre>"},{"location":"reference/api/#quick-examples","title":"Quick Examples","text":""},{"location":"reference/api/#one-line-operations","title":"One-Line Operations","text":"<pre><code># Load and convert between formats\nCTK.load(\"chatgpt.json\").export_as(\"markdown\").save(\"output.md\")\n\n# Filter and export\nload(\"all.json\").filter(lambda c: \"python\" in c.title).export_as(\"jsonl\").save(\"python.jsonl\")\n</code></pre>"},{"location":"reference/api/#building-conversations","title":"Building Conversations","text":"<pre><code># Create a conversation programmatically\nchat = (conversation(\"Python Tutorial\")\n    .system(\"You are a Python expert\")\n    .user(\"What is async/await?\")\n    .assistant(\"Async/await enables concurrent code execution...\")\n    .user(\"Show me an example\")\n    .assistant(\"```python\\nasync def example():...\\n```\")\n    .with_tags(\"python\", \"tutorial\")\n    .build())\n\n# Create branching conversations\nbranching = (conversation(\"Creative Writing\")\n    .user(\"Write a haiku\")\n    .assistant(\"First version...\")\n    .branch()  # Alternative response\n    .assistant(\"Second version...\")\n    .build())\n</code></pre>"},{"location":"reference/api/#database-operations","title":"Database Operations","text":"<pre><code># Initialize with database\nctk = CTK(\"conversations.db\")\n\n# Import with metadata\nctk.import_from(\"export.json\")\n   .with_format(\"openai\")\n   .with_tags(\"imported\", \"2024\")\n   .with_project(\"Support\")\n   .save()\n\n# Search with filters\nresults = ctk.search(\"python async\")\n    .in_source(\"ChatGPT\")\n    .with_model(\"gpt-4\")\n    .limit(20)\n    .get()\n\n# Query conversations\nrecent = ctk.conversations()\n    .where(source=\"Claude\")\n    .order_by(\"updated_at\", desc=True)\n    .limit(10)\n    .get()\n\n# Batch operations\nwith ctk.batch():\n    ctk.import_from(\"file1.json\").save()\n    ctk.import_from(\"file2.json\").save()\n    ctk.import_from(\"file3.json\").save()\n</code></pre>"},{"location":"reference/api/#export-options","title":"Export Options","text":"<pre><code>from ctk import ExportBuilder\n\n# Markdown with full options\nExportBuilder(conversations, \"markdown\")\n    .with_paths(\"longest\")\n    .include_metadata(True)\n    .include_timestamps(True)\n    .include_tree_structure(True)\n    .save(\"export.md\")\n\n# JSON with different formats\nExportBuilder(conversations, \"json\")\n    .format_style(\"openai\")  # or \"anthropic\", \"ctk\", \"generic\"\n    .pretty_print(True)\n    .save(\"openai.json\")\n</code></pre>"},{"location":"reference/api/#complex-pipelines","title":"Complex Pipelines","text":"<pre><code># Chain multiple operations\nload(\"conversations.json\")\n    .filter(lambda c: len(c.message_map) &gt; 10)  # Long conversations\n    .filter(lambda c: c.metadata.source == \"ChatGPT\")\n    .transform(lambda c: add_word_count(c))\n    .add_tags(\"processed\", \"analyzed\")\n    .export_as(\"jsonl\")\n    .save(\"processed.jsonl\")\n\ndef add_word_count(conv):\n    \"\"\"Add word count to metadata\"\"\"\n    total = sum(\n        len(msg.content.get_text().split())\n        for msg in conv.message_map.values()\n        if msg.content\n    )\n    conv.metadata.custom_data['word_count'] = total\n    return conv\n</code></pre>"},{"location":"reference/api/#api-components","title":"API Components","text":""},{"location":"reference/api/#main-classes","title":"Main Classes","text":"<ul> <li><code>CTK</code> - Main entry point with database connection</li> <li><code>ConversationBuilder</code> - Build conversations with chained messages</li> <li><code>ConversationLoader</code> - Load, filter, and transform conversations</li> <li><code>SearchBuilder</code> - Search with filters and limits</li> <li><code>QueryBuilder</code> - Query database with SQL-like operations</li> <li><code>ImportBuilder</code> - Import with tags and metadata</li> <li><code>ExportBuilder</code> - Export with format-specific options</li> </ul>"},{"location":"reference/api/#key-methods","title":"Key Methods","text":""},{"location":"reference/api/#conversationbuilder","title":"ConversationBuilder","text":"<ul> <li><code>.user(text)</code> - Add user message</li> <li><code>.assistant(text)</code> - Add assistant message</li> <li><code>.system(text)</code> - Add system message</li> <li><code>.branch()</code> - Start alternative response branch</li> <li><code>.with_tags(*tags)</code> - Add tags</li> <li><code>.with_metadata(**kwargs)</code> - Set metadata</li> <li><code>.build()</code> - Create the conversation</li> </ul>"},{"location":"reference/api/#conversationloader","title":"ConversationLoader","text":"<ul> <li><code>.filter(predicate)</code> - Filter with lambda function</li> <li><code>.transform(func)</code> - Transform each conversation</li> <li><code>.add_tags(*tags)</code> - Add tags to all</li> <li><code>.export_as(format)</code> - Export to format</li> <li><code>.save_to_db(path)</code> - Save to database</li> <li><code>.get()</code> - Get list of conversations</li> </ul>"},{"location":"reference/api/#searchbuilder","title":"SearchBuilder","text":"<ul> <li><code>.in_source(source)</code> - Filter by source</li> <li><code>.with_model(model)</code> - Filter by model</li> <li><code>.with_tags(*tags)</code> - Filter by tags</li> <li><code>.limit(n)</code> - Limit results</li> <li><code>.get()</code> - Execute search</li> </ul>"},{"location":"reference/api/#querybuilder","title":"QueryBuilder","text":"<ul> <li><code>.where(**filters)</code> - Add filter conditions</li> <li><code>.order_by(field, desc=False)</code> - Sort results</li> <li><code>.limit(n)</code> - Limit results</li> <li><code>.offset(n)</code> - Skip results</li> <li><code>.count()</code> - Count matches</li> <li><code>.delete_all()</code> - Delete matches</li> <li><code>.get()</code> - Execute query</li> </ul>"},{"location":"reference/api/#advanced-features","title":"Advanced Features","text":""},{"location":"reference/api/#multimodal-content","title":"Multimodal Content","text":"<pre><code>conv = (conversation(\"Demo\")\n    .user(\"Analyze this\",\n          images=[{\"url\": \"image.png\"}])\n    .assistant(\"I can see...\",\n               tools=[{\"name\": \"analyze\", \"arguments\": {...}}])\n    .build())\n</code></pre>"},{"location":"reference/api/#path-selection","title":"Path Selection","text":"<p>When exporting from branching conversations: - <code>\"longest\"</code> - Path with most messages - <code>\"first\"</code> - Original path - <code>\"last\"</code> - Most recent path - <code>\"all\"</code> - Export all paths</p>"},{"location":"reference/api/#custom-transformations","title":"Custom Transformations","text":"<pre><code>def anonymize(conv):\n    \"\"\"Remove personal information\"\"\"\n    for msg in conv.message_map.values():\n        if msg.content and msg.content.text:\n            msg.content.text = re.sub(r'\\b[A-Z][a-z]+\\b', '[NAME]', msg.content.text)\n    return conv\n\nload(\"chats.json\")\n    .transform(anonymize)\n    .export_as(\"json\")\n    .save(\"anonymous.json\")\n</code></pre>"},{"location":"reference/api/#best-practices","title":"Best Practices","text":"<ol> <li>Use context managers for batch operations</li> <li>Chain methods for cleaner code</li> <li>Filter early to reduce processing</li> <li>Use lambdas for custom logic</li> <li>Export formats match your use case:</li> <li><code>jsonl</code> for training data</li> <li><code>markdown</code> for human reading</li> <li><code>json</code> for full structure preservation</li> </ol>"},{"location":"reference/api/#examples","title":"Examples","text":"<p>See <code>examples/fluent_api.py</code> and <code>examples/fluent_api_demo.ipynb</code> for comprehensive examples.</p>"},{"location":"reference/cli/","title":"CLI Reference","text":""},{"location":"reference/cli/#commands-overview","title":"Commands Overview","text":"Command Description <code>import</code> Import conversations from various formats <code>export</code> Export conversations to various formats <code>list</code> List conversations <code>search</code> Search conversations <code>ask</code> Natural language queries <code>show</code> Show specific conversation <code>tree</code> View conversation tree structure <code>paths</code> List all paths in conversation <code>star</code> Star/unstar conversations <code>pin</code> Pin/unpin conversations <code>archive</code> Archive/unarchive conversations <code>title</code> Rename conversation <code>tag</code> Auto-tag with LLM <code>stats</code> Database statistics <code>merge</code> Merge databases <code>diff</code> Compare databases <code>filter</code> Create filtered database <code>chat</code> Launch interactive TUI <code>plugins</code> List available plugins"},{"location":"reference/cli/#global-options","title":"Global Options","text":"<pre><code>--db, -d PATH    # Database path (required for most commands)\n--help, -h       # Show help\n</code></pre>"},{"location":"reference/cli/#import","title":"import","text":"<pre><code>ctk import FILE --db DB [OPTIONS]\n\nOptions:\n  --format FORMAT    # Explicit format (auto-detected if omitted)\n  --tags TAGS        # Comma-separated tags to add\n  --project NAME     # Project name\n</code></pre>"},{"location":"reference/cli/#export","title":"export","text":"<pre><code>ctk export OUTPUT --db DB [OPTIONS]\n\nOptions:\n  --format FORMAT      # json, jsonl, markdown, html, hugo\n  --ids ID [ID ...]    # Specific conversation IDs\n  --limit N            # Maximum conversations (0 = all)\n  --filter-source S    # Filter by source\n  --filter-model M     # Filter by model\n  --filter-tags T      # Filter by tags\n  --starred            # Export only starred\n  --pinned             # Export only pinned\n  --sanitize           # Remove sensitive data\n  --path-selection     # longest, first, last\n\nHTML options:\n  --theme              # light, dark, auto\n  --media-dir DIR      # Output media separately\n  --no-embed           # Multi-file export\n\nHugo options:\n  --draft              # Mark as drafts\n  --no-date-prefix     # Skip date in directory names\n</code></pre>"},{"location":"reference/cli/#list","title":"list","text":"<pre><code>ctk list --db DB [OPTIONS]\n\nOptions:\n  --limit N            # Maximum results\n  --starred            # Show only starred\n  --pinned             # Show only pinned\n  --archived           # Show only archived\n  --source SOURCE      # Filter by source\n  --model MODEL        # Filter by model\n  --tags TAGS          # Filter by tags\n  --json               # Output as JSON\n</code></pre>"},{"location":"reference/cli/#search","title":"search","text":"<pre><code>ctk search QUERY --db DB [OPTIONS]\n\nOptions:\n  --limit N            # Maximum results\n  --title-only         # Search titles only\n  --content-only       # Search content only\n  --date-from DATE     # Filter by date\n  --date-to DATE       # Filter by date\n  --source SOURCE      # Filter by source\n  --model MODEL        # Filter by model\n  --tags TAGS          # Filter by tags\n</code></pre>"},{"location":"reference/cli/#organization-commands","title":"Organization Commands","text":"<pre><code>ctk star ID [ID ...] --db DB [--unstar]\nctk pin ID [ID ...] --db DB [--unpin]\nctk archive ID [ID ...] --db DB [--unarchive]\nctk title ID \"New Title\" --db DB\n</code></pre>"},{"location":"reference/cli/#database-operations","title":"Database Operations","text":"<pre><code>ctk merge DB1 DB2 --output OUTPUT\nctk diff DB1 DB2\nctk filter --db DB --output OUTPUT [--starred] [--tags T]\n</code></pre>"},{"location":"reference/shell-commands/","title":"Shell Mode Commands Reference","text":"<p>Quick reference for all 19 shell commands in CTK.</p>"},{"location":"reference/shell-commands/#navigation-3-commands","title":"Navigation (3 commands)","text":""},{"location":"reference/shell-commands/#cd-change-directory","title":"cd - Change Directory","text":"<pre><code>cd &lt;path&gt;       # Change to path\ncd /chats       # Go to chats directory\ncd abc123       # Navigate using conversation prefix\ncd m1           # Navigate to message node\ncd ..           # Go to parent directory\ncd /            # Go to root\n</code></pre>"},{"location":"reference/shell-commands/#ls-list-directory","title":"ls - List Directory","text":"<pre><code>ls              # List current directory\nls &lt;path&gt;       # List specific path\nls -l           # Long format (shows metadata)\nls | head 5     # List first 5 entries (with pipe)\n</code></pre>"},{"location":"reference/shell-commands/#pwd-print-working-directory","title":"pwd - Print Working Directory","text":"<pre><code>pwd             # Show current VFS path\n</code></pre>"},{"location":"reference/shell-commands/#search-1-command","title":"Search (1 command)","text":""},{"location":"reference/shell-commands/#find-find-conversations-and-messages","title":"find - Find Conversations and Messages","text":"<pre><code>find                        # Find all conversations\nfind &lt;path&gt;                 # Find in specific path\nfind -name &lt;pattern&gt;        # Find by title pattern (supports * and ?)\nfind -content &lt;pattern&gt;     # Find messages by content\nfind -role &lt;role&gt;           # Find by role (user/assistant/system)\nfind -type d                # Find directories (conversations)\nfind -type f                # Find files (messages)\nfind -i                     # Case-insensitive search\nfind -limit &lt;n&gt;             # Limit results to n items\nfind -l                     # Long format: rich table with title, model, date, tags\n\n# Examples - Default Format (paths for piping)\nfind /chats -type d -limit 5\n# Output:\n# /chats/7c87af4c-5e10-4eb4-8aaa-41070f710e0f/\n# /chats/5dce9708-0f2d-4c73-a634-b1db3517e7c1/\n\n# Long Format (-l flag shows metadata table)\nfind /chats -type d -limit 5 -l\n# Shows rich table with: #, ID (short), Title, Model, Updated, Tags\n# Includes visual flags: \u2b50 (starred), \ud83d\udccc (pinned), \ud83d\udce6 (archived)\n\n# Search and navigate workflow\nfind -name '*API*'                     # Find by title\nfind -content 'error' -limit 10        # Find in content\ncd $(find -name '*bug*' | head -1)     # Navigate to first match\nfind /starred -content 'important' -l  # Search starred with metadata\n</code></pre>"},{"location":"reference/shell-commands/#file-operations-5-commands","title":"File Operations (5 commands)","text":""},{"location":"reference/shell-commands/#cat-display-content","title":"cat - Display Content","text":"<pre><code>cat &lt;path&gt;      # Display file/message content\ncat m1          # Display message at m1\ncat m1/text     # Display message text metadata\ncat .           # Display current message\necho \"text\" | cat  # Display from stdin\n</code></pre>"},{"location":"reference/shell-commands/#head-show-first-lines","title":"head - Show First Lines","text":"<pre><code>head [n]        # Show first 10 lines from stdin\nhead 5          # Show first 5 lines\nhead &lt;path&gt; [n] # Show first n lines from path\ncat m1 | head 3 # Pipe example\n</code></pre>"},{"location":"reference/shell-commands/#tail-show-last-lines","title":"tail - Show Last Lines","text":"<pre><code>tail [n]        # Show last 10 lines from stdin\ntail 5          # Show last 5 lines\ntail &lt;path&gt; [n] # Show last n lines from path\ncat m1 | tail 3 # Pipe example\n</code></pre>"},{"location":"reference/shell-commands/#echo-echo-text","title":"echo - Echo Text","text":"<pre><code>echo &lt;text&gt;     # Print text\necho $VAR       # Print environment variable\necho \"hello\"    # Print with quotes\n</code></pre>"},{"location":"reference/shell-commands/#grep-search-patterns","title":"grep - Search Patterns","text":"<pre><code>grep &lt;pattern&gt;          # Search stdin\ngrep &lt;pattern&gt; &lt;path&gt;   # Search file\ngrep -i &lt;pattern&gt;       # Case-insensitive\ngrep -n &lt;pattern&gt;       # Show line numbers\ncat m1 | grep \"error\"   # Pipe example\n</code></pre>"},{"location":"reference/shell-commands/#visualization-2-commands","title":"Visualization (2 commands)","text":""},{"location":"reference/shell-commands/#tree-show-conversation-tree","title":"tree - Show Conversation Tree","text":"<pre><code>tree            # Show tree for current conversation\ntree &lt;conv_id&gt;  # Show tree for specific conversation\ntree | head 20  # Show first 20 lines\n</code></pre>"},{"location":"reference/shell-commands/#paths-list-conversation-paths","title":"paths - List Conversation Paths","text":"<pre><code>paths           # Show all paths in current conversation\npaths &lt;conv_id&gt; # Show paths for specific conversation\npaths | head 15 # Show first 15 lines\n</code></pre>"},{"location":"reference/shell-commands/#organization-7-commands","title":"Organization (7 commands)","text":""},{"location":"reference/shell-commands/#star-star-conversation","title":"star - Star Conversation","text":"<pre><code>star            # Star current conversation\nstar &lt;conv_id&gt;  # Star specific conversation\nstar 7c87       # Works with prefix resolution\n</code></pre>"},{"location":"reference/shell-commands/#unstar-unstar-conversation","title":"unstar - Unstar Conversation","text":"<pre><code>unstar          # Unstar current conversation\nunstar &lt;conv_id&gt;# Unstar specific conversation\n</code></pre>"},{"location":"reference/shell-commands/#pin-pin-conversation","title":"pin - Pin Conversation","text":"<pre><code>pin             # Pin current conversation\npin &lt;conv_id&gt;   # Pin specific conversation\n</code></pre>"},{"location":"reference/shell-commands/#unpin-unpin-conversation","title":"unpin - Unpin Conversation","text":"<pre><code>unpin           # Unpin current conversation\nunpin &lt;conv_id&gt; # Unpin specific conversation\n</code></pre>"},{"location":"reference/shell-commands/#archive-archive-conversation","title":"archive - Archive Conversation","text":"<pre><code>archive         # Archive current conversation\narchive &lt;conv_id&gt; # Archive specific conversation\n</code></pre>"},{"location":"reference/shell-commands/#unarchive-unarchive-conversation","title":"unarchive - Unarchive Conversation","text":"<pre><code>unarchive       # Unarchive current conversation\nunarchive &lt;conv_id&gt; # Unarchive specific conversation\n</code></pre>"},{"location":"reference/shell-commands/#title-set-conversation-title","title":"title - Set Conversation Title","text":"<pre><code>title &lt;text&gt;    # Set title for current conversation\ntitle My Title  # Example\ntitle &lt;conv_id&gt; &lt;text&gt; # Set title for specific conversation\n</code></pre>"},{"location":"reference/shell-commands/#chat-llm-2-commands","title":"Chat &amp; LLM (2 commands)","text":""},{"location":"reference/shell-commands/#chat-enter-chat-mode","title":"chat - Enter Chat Mode","text":"<pre><code>chat            # Enter interactive chat mode\nchat &lt;message&gt;  # Send message and enter chat mode\necho \"text\" | chat  # Send piped text as message\n</code></pre> <p>Important: When you enter <code>chat</code> from a conversation or message node, the full conversation history up to that point is automatically loaded as context for the LLM.</p> <p>Example: <pre><code>$ cd /chats/abc123/m1/m1/m1  # Navigate to specific message\n$ chat                        # Conversation history loaded!\nEntering chat mode. Type /exit to return to shell.\n# LLM now has context of all messages from root to m1/m1/m1\n</code></pre></p>"},{"location":"reference/shell-commands/#complete-get-llm-completion","title":"complete - Get LLM Completion","text":"<pre><code>complete &lt;prompt&gt;       # Get completion without entering chat\necho \"prompt\" | complete  # Get completion from stdin\n</code></pre>"},{"location":"reference/shell-commands/#vfs-structure","title":"VFS Structure","text":"<pre><code>/\n\u251c\u2500\u2500 chats/                  # All conversations\n\u2502   \u2514\u2500\u2500 &lt;conv_id&gt;/         # Specific conversation\n\u2502       \u2514\u2500\u2500 m1/            # Message nodes\n\u2502           \u251c\u2500\u2500 text       # Message content (file)\n\u2502           \u251c\u2500\u2500 role       # Message role (file)\n\u2502           \u251c\u2500\u2500 timestamp  # Creation time (file)\n\u2502           \u251c\u2500\u2500 id         # Message UUID (file)\n\u2502           \u2514\u2500\u2500 m1/        # Child messages\n\u251c\u2500\u2500 starred/               # Starred conversations\n\u251c\u2500\u2500 pinned/                # Pinned conversations\n\u251c\u2500\u2500 archived/              # Archived conversations\n\u251c\u2500\u2500 tags/                  # Tag hierarchy\n\u251c\u2500\u2500 recent/                # Recent conversations\n\u251c\u2500\u2500 source/                # Grouped by source\n\u2514\u2500\u2500 model/                 # Grouped by model\n</code></pre>"},{"location":"reference/shell-commands/#environment-variables","title":"Environment Variables","text":"<p>Available variables: - <code>$CWD</code> / <code>$PWD</code> - Current working directory - <code>$MODEL</code> - Current LLM model - <code>$PROVIDER</code> - Current LLM provider - <code>$CONV_ID</code> - Current conversation ID (if in conversation) - <code>$MSG_COUNT</code> - Message count (if in conversation)</p> <p>Usage: <pre><code>echo $CWD\ncd /chats &amp;&amp; echo $PWD\ngrep $MODEL model.txt\n</code></pre></p>"},{"location":"reference/shell-commands/#piping-examples","title":"Piping Examples","text":"<pre><code># List and filter\nls | grep \"^7\" | head 3\n\n# Read and search\ncat m1/text | grep \"important\"\n\n# Count lines\ncat m1 | wc -l\n\n# Environment variable inspection\necho $CWD | grep \"/chats\"\n\n# Complex pipeline\nls /starred | grep -i \"test\" | head 5\n\n# Find and pipe to head\nfind -role user | head 10\n\n# Search message content\ncat text | grep -i \"error\"\n</code></pre>"},{"location":"reference/shell-commands/#prefix-resolution","title":"Prefix Resolution","text":"<p>Conversation IDs can be referenced by their first 3+ characters:</p> <pre><code>$ cd 7c87\nResolved '7c87' to: 7c87af4c-5e10-4eb4-8aaa-41070f710e0f\n\n$ star abc1\nStarred conversation: abc123...\n\n$ tree 68e\n# Shows tree for 68e133a0-f23c-832b-b3d9-a3a748b39b06\n</code></pre>"},{"location":"reference/shell-commands/#relative-path-navigation","title":"Relative Path Navigation","text":"<pre><code>cd ..           # Parent directory\ncd m1           # Relative to current path\ncd ./m1/m2      # Explicit relative path\ncd /chats/abc/m1  # Absolute path\n</code></pre>"},{"location":"reference/shell-commands/#message-metadata-files","title":"Message Metadata Files","text":"<p>Each message node exposes metadata as readable files:</p> <pre><code>$ cd /chats/abc123/m1\n$ ls\ntext\nrole\ntimestamp\nid\nm1/\n\n$ cat text\nHello, world!\n\n$ cat role\nuser\n\n$ cat timestamp\n2024-01-15 10:30:00\n</code></pre>"},{"location":"reference/shell-commands/#tips-tricks","title":"Tips &amp; Tricks","text":"<ol> <li> <p>Quick navigation: Use prefix resolution for faster navigation    <pre><code>cd /chats/7c8  # Instead of full UUID\n</code></pre></p> </li> <li> <p>Organize on the fly: Star/pin/archive from anywhere    <pre><code>star 7c87      # Star without navigating to it\n</code></pre></p> </li> <li> <p>Pipe for powerful queries:    <pre><code>ls /chats | grep \"^a\" | head 10  # First 10 conversations starting with 'a'\n</code></pre></p> </li> <li> <p>Inspect metadata: Use cat on metadata files    <pre><code>cat m1/role    # Quick role check\ncat m1/id      # Get message UUID\n</code></pre></p> </li> <li> <p>Combine commands:    <pre><code>cd /starred &amp;&amp; ls | head 5  # Show first 5 starred conversations\n</code></pre></p> </li> <li> <p>Search efficiently:    <pre><code>find -content 'error' -limit 20        # Limit results for faster search\nfind /starred -role user               # Search specific VFS directories\nfind -name '*important*' -type d       # Find conversations by title\n</code></pre></p> </li> <li> <p>Grep within messages:    <pre><code>cat text | grep -i 'pattern'           # Case-insensitive search in message\ngrep -n 'TODO' text                    # Show line numbers\n</code></pre></p> </li> </ol>"},{"location":"reference/shell-commands/#command-summary","title":"Command Summary","text":"Category Commands Count Navigation cd, ls, pwd 3 Search find 1 File Operations cat, head, tail, echo, grep 5 Visualization tree, paths 2 Organization star, unstar, pin, unpin, archive, unarchive, title 7 Chat/LLM chat, complete 2 Total 20"}]}